# Leonardo.ai -- Tier 1 (Credit Polling)
# AI image/video generation API with multi-pool credit tracking

provider:
  name: "leonardo"
  display_name: "Leonardo.ai"
  service_type: "ai-image-generation"

api:
  base_url: "https://cloud.leonardo.ai/api/rest/v1"
  auth_method: "bearer_token"
  rate_limit: 10
  timeout: 30
  endpoints:
    me: "/me"

auth:
  required_env_vars:
    - "LEONARDO_API_KEY"
  optional_env_vars: []

data:
  source_format: "json"
  time_field: "apiPlanTokenRenewalDate"
  cost_field: "apiSubscriptionTokens + apiPaidTokens"
  resource_field: "service"

cbf_mapping:
  time_usage_start: "snapshot_timestamp"
  cost_cost: "credits_consumed * 0.0011"
  bill_invoice_id: "f'leonardo-{month}'"
  lineitem_type: "Usage"
  lineitem_description: "Leonardo.ai API Credit Consumption"
  lineitem_cloud_provider: "leonardo"
  resource_id: "leonardo:image-generation"
  resource_service: "image-generation"
  resource_account: "default"
  resource_region: "global"
  resource_usage_family: "api-credits"
  usage_units: "credits"

credit_config:
  credits_endpoint: "/me"
  credit_to_usd: 0.0011
  token_pools:
    - field: "apiSubscriptionTokens"
      label: "API Subscription"
    - field: "apiPaidTokens"
      label: "API Paid"
  snapshot_file: "state/leonardo_snapshots.csv"

dependencies:
  - "requests>=2.28.0"
  - "python-dotenv>=0.19.0"
